<extension implements="::fwServices::registry::AppConfig">
    <id>VRActivityConfig</id>
    <type>parameters</type>
    <parameters>
        <param name="GENERIC_UID" />
        <param name="WID_PARENT" />
        <param name="SELECTED_UID_image" />
    </parameters>
    
    <config>


        <object type="::fwData::Composite">

            <service uid="${GENERIC_UID}_mainView" type="::gui::view::IView" impl="::gui::view::DefaultView" autoConnect="no">
                <gui>
                    <layout type="::fwGui::CardinalLayoutManager">
                        <view caption="VR" align="center" />
                        <view caption="Negato" align="right" minWidth="350" />
                        <view caption="TFM" align="right" minWidth="350" />
                    </layout>
                    <toolBar />
                </gui>
                <registry>
                    <parent wid="${WID_PARENT}" />
                    <toolBar sid="${GENERIC_UID}_toolBar" start="yes" />
                    <view sid="${GENERIC_UID}_vr" start="yes" />
                    <view sid="${GENERIC_UID}_multiView_negato" start="yes" />
                    <view sid="${GENERIC_UID}_tfm" start="no" />
                </registry>
            </service>
           
            <service uid="${GENERIC_UID}_toolBar" type="::fwGui::IToolBarSrv" impl="::gui::aspect::DefaultToolBarSrv" autoConnect="no">
                <gui>
                    <layout>
                        <menuItem name="Hide cross" icon="Bundles/VRRender_0-9/icons/HideCross.png" style="radio" />
                        <menuItem name="Show normal cross" icon="Bundles/VRRender_0-9/icons/NormalCross.png" style="radio" />
                        <menuItem name="Show full cross" icon="Bundles/VRRender_0-9/icons/FullCross.png" style="radio" />
                        <separator />
                        <menuItem name="Show/hide box cropping" icon="Bundles/VRRender_0-9/icons/icon-box.png" />
                        <menuItem name="Reset box cropping" icon="Bundles/VRRender_0-9/icons/icon-box-reset.png" />
                    </layout>
                </gui>
                <registry>
                    <menuItem sid="${GENERIC_UID}_ActionHideCross" start="no" />
                    <menuItem sid="${GENERIC_UID}_ActionShowNormalCross" start="no" />
                    <menuItem sid="${GENERIC_UID}_ActionShowFullCross" start="no" />
                    <menuItem sid="${GENERIC_UID}_ActionShowHideBoxWidget" start="yes" />
                    <menuItem sid="${GENERIC_UID}_ActionResetBoxWidget" start="yes" />
                </registry>
            </service>



            <!-- NEGATO 2 VIEW -->
            <service uid="${GENERIC_UID}_multiView_negato" type="::gui::view::IView" impl="::gui::view::DefaultView" autoConnect="no">
                <gui>
                    <layout type="::fwGui::LineLayoutManager">
                        <orientation value="vertical" />
                        <view proportion="1" />
                        <view proportion="0" minHeight="30" />
                    </layout>
                </gui>
                <registry>
                    <view sid="${GENERIC_UID}_negato2" start="yes" />
                    <view sid="${GENERIC_UID}_multiView_negato2_bottom" start="yes" />
                </registry>
            </service>
            
            <service uid="${GENERIC_UID}_multiView_negato2_bottom" type="::gui::view::IView" impl="::gui::view::DefaultView" autoConnect="no">
                <gui>
                    <layout type="::fwGui::LineLayoutManager">
                        <orientation value="horizontal" />
                        <view proportion="0" minWidth="30" />
                        <view proportion="1" />
                        <view proportion="0" minWidth="30" />
                    </layout>
                </gui>
                <registry>
                    <view sid="${GENERIC_UID}_snapshotNegato2Editor" start="yes" />
                    <view sid="${GENERIC_UID}_slider_negato2" start="no" />
                    <view sid="${GENERIC_UID}_distanceNegato2Editor" start="yes" />
                </registry>
            </service>
            
            <service uid="${GENERIC_UID}_snapshotNegato2Editor" type="::gui::editor::IEditor" impl="::uiVisu::SnapshotEditor" autoConnect="no">
                <snap>
                    <scene uid="${GENERIC_UID}_negato2" />
                </snap>
            </service>






            <!-- GENERIC SCENE DEFINITION -->
            <item key="visuConfig">
                <object uid="${GENERIC_UID}_VisuComposite" type="::fwData::Composite">
           
                    <!-- Generic Scene Negato1 -->
                    <service uid="${GENERIC_UID}_vr" impl="::fwRenderVTK::VtkRenderService" type="::fwRender::IRender" autoConnect="yes">
                        <scene>

                            <picker id="negato1default" vtkclass="fwVtkCellPicker" />

                            <renderer id="default" background="0.0" />

                            <adaptor id="renderNegato1" class="::visuVTKAdaptor::Render" objectId="self">
                                <config renderer="default" />
                            </adaptor>

                            <adaptor id="Interactor1" class="::visuVTKAdaptor::InteractorStyle" objectId="self">
                                <config renderer="default" style="InteractorStyle3DForNegato" />
                            </adaptor>

                            <adaptor id="VolumeScene3DA" class="::visuVTKVRAdaptor::Volume" objectId="image">
                                <config renderer="default" selectedTFKey="SelectedTF" tfSelectionFwID="${GENERIC_UID}_TFSelections" />
                            </adaptor>

                        </scene>
                    </service>


                    <!-- Generic Scene Negato2 -->
                    <service uid="${GENERIC_UID}_negato2" impl="::fwRenderVTK::VtkRenderService" type="::fwRender::IRender" autoConnect="yes">
                        <scene>
                            <picker id="negato2default" vtkclass="fwVtkCellPicker" />
                            <renderer id="default" background="0.0" />
                            <adaptor id="renderNegato2" class="::visuVTKAdaptor::Render" objectId="self">
                                <config renderer="default" />
                            </adaptor>
                            <adaptor id="snapshot1" class="::visuVTKAdaptor::Snapshot" objectId="self">
                                <config renderer="default" />
                            </adaptor>
                            <adaptor id="Interactor1" class="::visuVTKAdaptor::InteractorStyle" objectId="self">
                                <config renderer="default" style="InteractorStyle2DForNegato" />
                            </adaptor>
                            <adaptor id="MPRNegato2" class="::visuVTKAdaptor::NegatoMPR" objectId="image">
                                <config renderer="default" picker="negato2default" mode="2d" slices="1" sliceIndex="frontal"
                                        selectedTFKey="SelectedTF" tfSelectionFwID="${GENERIC_UID}_TFSelections" />
                            </adaptor>
                            <adaptor id="text" class="::visuVTKAdaptor::ImageText" objectId="image">
                                <config renderer="default" picker="negato2default" text=""
                                        selectedTFKey="SelectedTF" tfSelectionFwID="${GENERIC_UID}_TFSelections" />
                            </adaptor>
                            <adaptor id="multiDistances" class="::visuVTKAdaptor::ImageMultiDistances" objectId="image">
                                <config filter="true" renderer="default" picker="negato2default" />
                            </adaptor>
                            <adaptor id="landmarksNegato2" class="::visuVTKAdaptor::ImageLandmarks" objectId="image">
                                <config renderer="default" picker="negato2default" />
                            </adaptor>
                        </scene>
                    </service>

                    <item key="TFSelectionsKey">
                        <object uid="${GENERIC_UID}_TFSelections" type="::fwData::Composite" />
                    </item>

                    <item key="image">
                        <object uid="${SELECTED_UID_image}" src="ref" type="::fwData::Image">
                    
                            <service uid="${GENERIC_UID}_imageDumpLocker" impl="::ctrlMemory::LockDumpSrv" type="::fwServices::IController" autoConnect="no" />
                    
                            <service uid="${GENERIC_UID}_MedicalImageSrv" impl="::ctrlSelection::MedicalImageSrv" type="::fwServices::IController" autoConnect="no" />

                            <!-- Editors for Negato2 -->
                            <service uid="${GENERIC_UID}_slider_negato2" impl="::uiImage::SliceIndexPositionEditor" type="::gui::editor::IEditor" autoConnect="yes">
                                <sliceIndex>frontal</sliceIndex>
                            </service>
                            <service uid="${GENERIC_UID}_distanceNegato2Editor" type="::gui::editor::IEditor" impl="::uiMeasurement::editor::Distance" autoConnect="no">
                                <placeInScene uid="${GENERIC_UID}_negato2" />
                            </service>

                            <service uid="${GENERIC_UID}_ActionHideCross" type="::fwGui::IActionSrv" impl="::uiVisu::action::CrossTypeAction" autoConnect="no">
                                <crossType>hide</crossType>
                            </service>

                            <service uid="${GENERIC_UID}_ActionShowNormalCross" type="::fwGui::IActionSrv" impl="::uiVisu::action::CrossTypeAction" autoConnect="no">
                                <crossType>half</crossType>
                                <state active="true" />
                            </service>

                            <service uid="${GENERIC_UID}_ActionShowFullCross" type="::fwGui::IActionSrv" impl="::uiVisu::action::CrossTypeAction" autoConnect="no">
                                <crossType>full</crossType>
                            </service>

                            <service uid="${GENERIC_UID}_ActionShowHideBoxWidget" type="::fwGui::IActionSrv" impl="::gui::action::ActionNotifyService" autoConnect="no">
                                <notify type="::fwServices::ObjectMsg" event="SHOWHIDE_BOX_WIDGET" />
                            </service>

                            <service uid="${GENERIC_UID}_ActionResetBoxWidget" type="::fwGui::IActionSrv" impl="::gui::action::ActionNotifyService" autoConnect="no">
                                <notify type="::fwServices::ObjectMsg" event="RESET_BOX_WIDGET" />
                            </service>
                            
                            <service uid="${GENERIC_UID}_FieldManager" impl="::ctrlSelection::manager::SField" type="::ctrlSelection::IManagerSrv" autoConnect="yes" >
                                <mode type="stop" />
                                <config>
                                    <field id="m_transferFunctionCompositeId" type="::fwData::Composite">
                                        <service uid="${GENERIC_UID}_tfm" type="::gui::editor::IEditor" impl="::uiTF::TransferFunctionEditor" autoConnect="yes">
                                            <config selectedTFKey="SelectedTF" tfSelectionFwID="${GENERIC_UID}_TFSelections" />
                                        </service>
                                    </field>
                                </config>
                            </service>
                                
                        </object>
                    </item>

                </object>
            </item>

            <!-- START AND STOP SERVICES -->
            <start uid="${GENERIC_UID}_imageDumpLocker" />
            <start uid="${GENERIC_UID}_mainView" />
            <start uid="${GENERIC_UID}_MedicalImageSrv" />
            <start uid="${GENERIC_UID}_slider_negato2" />
            <start uid="${GENERIC_UID}_ActionHideCross" />
            <start uid="${GENERIC_UID}_ActionShowNormalCross" />
            <start uid="${GENERIC_UID}_ActionShowFullCross" />
            <start uid="${GENERIC_UID}_FieldManager" />

        </object>


    </config>
</extension>
