<extension implements="::fwServices::registry::AppConfig">
    <id>Activity1Config</id>
    <type>parameters</type>
    <parameters>
        <param name="GENERIC_UID" />
        <param name="WID_PARENT" />
        <param name="COMPOSITE_SELECTION" />
        <param name="UID_OF_SELECTED_PATIENT" />
        <param name="medicalWorkspaceUid" />
    </parameters>

    <config>


        <object type="::fwData::Composite">

            <xi:include href="A1MenuAndViewConfig.xml" xmlns:xi="http://www.w3.org/2003/XInclude" />

            <item key="compositeSelection">
                <object uid="${COMPOSITE_SELECTION}" src="ref" type="::fwData::Composite">

                    <service uid="${GENERIC_UID}_myManagerLockDump" impl="::ctrlMemory::manager::LockDumpManagerSrv" type="::ctrlSelection::IManagerSrv" autoConnect="yes" >
                        <manageLockOn key="image" />
                    </service>

                    <service uid="${GENERIC_UID}_action_activity3" type="::fwGui::IActionSrv" impl="::gui::action::ConfigActionSrvWithKeySendingConfigTemplate" autoConnect="yes">
                        <config id="Activity3Config" title="Visu 2D" titlePrefixKey="@values.tabPrefix" tooltipKey="@values.tabInfo" icon="Bundles/VRRender_0-9/icons/icon-2D.png" />
                        <key id="image" pattern="SELECTED_UID_image" />
                    </service>

                    <service uid="${GENERIC_UID}_action_vr_activity" type="::fwGui::IActionSrv" impl="::gui::action::ConfigActionSrvWithKeySendingConfigTemplate" autoConnect="yes">
                        <config id="VRActivityConfig" title="VR" titlePrefixKey="@values.tabPrefix" tooltipKey="@values.tabInfo" icon="Bundles/VRRender_0-9/icons/icon-VR.png" />
                        <key id="image" pattern="SELECTED_UID_image" />
                    </service>

                    <service uid="${GENERIC_UID}_action_activity4" type="::fwGui::IActionSrv" impl="::gui::action::ConfigActionSrvWithKeySendingConfigTemplate" autoConnect="yes">
                        <config id="Activity4Config" title="Visu 3D" titlePrefixKey="@values.tabPrefix" tooltipKey="@values.tabInfo" icon="Bundles/VRRender_0-9/icons/icon-3D.png" />
                        <key id="image" pattern="SELECTED_UID_image" />
                        <key id="acquisition" pattern="SELECTED_UID_acquisition" />
                    </service>

                    <service uid="${GENERIC_UID}_managerMainFrame" impl="::ctrlSelection::manager::SwapperSrv" type="::ctrlSelection::IManagerSrv" autoConnect="yes" >
                        <mode type="dummy" />
                        <config>
                            <object id="image" type="::fwData::Image">
                                <service uid="${GENERIC_UID}_MedicalImageSrv" impl="::ctrlSelection::MedicalImageSrv" type="::fwServices::IController" autoConnect="no" />
                                <!-- Editor for Negato -->
                                <service uid="${GENERIC_UID}_slider_negato1" impl="::uiImage::SliceIndexPositionEditor" type="::gui::editor::IEditor" autoConnect="yes">
                                    <sliceIndex>axial</sliceIndex>
                                </service>

                            </object>
                        </config>
                    </service>

                    <!-- Generic Scene Negato -->
                    <service uid="${GENERIC_UID}_negato1" impl="::fwRenderVTK::VtkRenderService" type="::fwRender::IRender" autoConnect="yes">
                        <scene>
                            <picker id="negato1default" vtkclass="fwVtkCellPicker" />
                            <renderer id="default" background="0.0" />
                            <adaptor id="renderNegato1" class="::visuVTKAdaptor::Render" objectId="self">
                                <config renderer="default" />
                            </adaptor>
                            <adaptor id="Interactor1" class="::visuVTKAdaptor::InteractorStyle" objectId="self">
                                <config renderer="default" style="InteractorStyle2DForNegato" />
                            </adaptor>
                            <adaptor id="MPRNegato1" class="::visuVTKAdaptor::NegatoMPR" objectId="image">
                                <config renderer="default" picker="negato1default" mode="2d" slices="1" sliceIndex="axial" useColorTF="no" />
                            </adaptor>
                            <adaptor id="text" class="::visuVTKAdaptor::ImageText" objectId="image">
                                <config renderer="default" picker="negato1default" text="" />
                            </adaptor>
                        </scene>
                    </service>

                </object>
            </item>

            <item key="medicalWorkspace">
                <object uid="${medicalWorkspaceUid}" src="ref" type="::fwData::Composite">

                    <service uid="${GENERIC_UID}_action_exportMedicalWorkspace" type="::fwGui::IActionSrv" impl="::gui::action::StarterActionService" autoConnect="no">
                        <start uid="${GENERIC_UID}_writerMedicalWorkspace" />
                    </service>

                    <service uid="${GENERIC_UID}_writerMedicalWorkspace" type="::gui::editor::IDialogEditor" impl="::uiIO::editor::IOSelectorService" autoConnect="no">
                        <type mode="writer" />
                        <selection mode="include" />
                        <addSelection service="::ioXML::FwXMLGenericWriterService" />
                        <addSelection service="::ioAtoms::SMedDataWriter" />
                        <config id="FwXMLGenericWriterReaderMWZConfig" service="::ioXML::FwXMLGenericWriterService" />
                    </service>

                    <service uid="${GENERIC_UID}_action_importMedicalWorkspace" type="::fwGui::IActionSrv" impl="::uiPatientDB::action::AddMedicalWorkspace" autoConnect="no" >
                        <IOSelectorSrvConfig name="MedicalDataIOSelectorReaderConfig" />
                    </service>

                </object>
            </item>

            <item key="patientDB">
                <object uid="${UID_OF_SELECTED_PATIENT}" src="ref" type="::fwData::PatientDB">
                    <service uid="${GENERIC_UID}_selector" type="::gui::editor::IEditor" impl="::uiPatientDB::PatientDBGuiSelectorService" autoConnect="yes" />
                    <service uid="${GENERIC_UID}_infoEditor" type="::gui::editor::IEditor" impl="::uiPatientDB::PatientDBInfoEditor" autoConnect="yes" />

                    <!-- Actions on PatientDB -->
                    <service uid="${GENERIC_UID}_action_CloneImage" type="::fwGui::IActionSrv" impl="::uiPatientDB::action::CloneImage" autoConnect="no" />
                    <service uid="${GENERIC_UID}_action_importPatient" type="::fwGui::IActionSrv" impl="::uiPatientDB::action::AddPatientDB" autoConnect="no">
                        <IOSelectorSrvConfig name="IOSelectorServiceConfigVRRenderPatientDBReader" />
                    </service>

                    <service uid="${GENERIC_UID}_action_exportAllPatient" type="::fwGui::IActionSrv" impl="::uiPatientDB::action::ExportPatientDB" autoConnect="no">
                        <IOSelectorSrvConfig name="IOSelectorServiceConfigVRRenderPatientDBWriter" />
                    </service>
                    <service uid="${GENERIC_UID}_action_exportSelPatient" type="::fwGui::IActionSrv" impl="::uiPatientDB::action::ExportPatient" autoConnect="no">
                        <IOSelectorSrvConfig name="IOSelectorServiceConfigVRRenderPatientDBWriter" />
                    </service>
                    <service uid="${GENERIC_UID}_action_exportSelImage" type="::fwGui::IActionSrv" impl="::uiPatientDB::action::ExportImage" autoConnect="no">
                        <IOSelectorSrvConfig name="IOSelectorServiceConfigVRRenderPatientDBWriter" />
                    </service>
                    <service uid="${GENERIC_UID}_action_eraseAllPatients" type="::fwGui::IActionSrv" impl="::uiPatientDB::action::ErasePatientDB" autoConnect="no" />
                    <service uid="${GENERIC_UID}_action_eraseSelImage" type="::fwGui::IActionSrv" impl="::uiPatientDB::action::ErasePatient" autoConnect="no" />
                    <!-- End of Actions on PatientDB -->
                </object>

            </item>

            <!-- START AND STOP SERVICES -->
            <start uid="${GENERIC_UID}_myManagerLockDump" />
            <start uid="${GENERIC_UID}_mainView" />
            <start uid="${GENERIC_UID}_selector" />
            <start uid="${GENERIC_UID}_infoEditor" />
            <start uid="${GENERIC_UID}_negato1" />
            <start uid="${GENERIC_UID}_managerMainFrame" />
            <start uid="${GENERIC_UID}_action_importPatient" />
            <start uid="${GENERIC_UID}_action_exportAllPatient" />
            <start uid="${GENERIC_UID}_action_exportSelPatient" />
            <start uid="${GENERIC_UID}_action_exportSelImage" />
            <start uid="${GENERIC_UID}_action_eraseAllPatients" />
            <start uid="${GENERIC_UID}_action_eraseSelImage" />
            <start uid="${GENERIC_UID}_action_CloneImage" />
            <start uid="${GENERIC_UID}_action_activity3" />
            <start uid="${GENERIC_UID}_action_vr_activity" />
            <start uid="${GENERIC_UID}_action_activity4" />

        </object>

    </config>
</extension>
