<plugin id="tutoLoaderExternalDataConfig">
<extension id="tutoLoaderExternalDataConfig" implements="::fwServices::ServiceObjectConfig">

    <!-- The root data object in TutoConfigurations is a ::fwData::Composite. because it has to manage several objects -->
    <object type="::fwData::Composite">
        <!--  a ::fwData::Image. -->
        <item key="tutoLoaderExternalDataImage">
             <object type="::fwData::Image">
                <!-- The first service (::gui::action::StarterActionService) is a generic action. In the configuration of this service,
                we specify the id of the services to be started and updated (start and update methods) when user click on the menuItem "Open image".
                In this tutorial, ::gui::action::StarterActionService service starts and updates the service with the uid "myReaderPathFile". -->
                <service uid="action_openFile" type="::fwGui::IActionSrv" implementation="::gui::action::StarterActionService" autoComChannel="no" >
                    <start uid="myReaderPathFile"/>
                </service>
                <service implementation="::uiIO::editor::IOSelectorService" type="::gui::editor::IDialogEditor" uid="myReaderPathFile" autoComChannel="no">
                    <type mode="reader" />
                    <selection mode="exclude" />
                    <addSelection service="::ioXML::FwXMLPatientDBReaderService" />
                </service>
                <service implementation="::ctrlSelection::wrapper::ImageWrapperSrv" type="::ctrlSelection::IWrapperSrv" uid="newOBject2newImage" autoComChannel="yes" />
        
                <!-- The other service (::gui::action::StarterActionService) is a generic action. In the configuration of this service,
                we specify the id of the services to be started and updated (start and update methods) when user click on the menuItem "save image".
                In this tutorial, ::gui::action::StarterActionService service starts and updates the service with the uid "myWriterPathFile". -->
                <service uid="action_SaveFile" type="::fwGui::IActionSrv" implementation="::gui::action::StarterActionService" autoComChannel="no" >
                    <start uid="myWriterPathFile"/>
                </service>
                <service implementation="::uiIO::editor::IOSelectorService" type="::gui::editor::IDialogEditor" uid="myWriterPathFile" autoComChannel="no">
                    <type mode="writer" />
                </service>
        
                <!-- This service (::vtkSimpleNegato::RendererService) is a 3D visualization service of medical images. -->
                <service implementation="::vtkSimpleNegato::RendererService" type="::fwRender::IRender" uid="myRenderingTuto" autoComChannel="yes" />
                
            </object>
        </item>
        
         <!-- Graphical user interface manager. The identifier (id) of the container is 900, it's a wxWidgets id.
         In the tag <menus> we specify the identifiers of different services for the different menus.
         In this tutorial, only one service (::gui::aspect::IMenu type) is created. 
         This application have 2 menu one to open/save image and one to load/save extra data.
         There are FW4SPL identifiers. -->
    
         <service type="::fwGui::IFrameSrv" implementation="::gui::frame::DefaultFrame" autoComChannel="no">
            <gui>
                <frame>
                    <name>Tuto07LoaderForExternalData</name>
                    <icon>Bundles/Tuto07LoaderForExternalData_0-1/tuto.ico</icon>
                 </frame>
                 <menuBar />
            </gui>
            <registry>
                <menuBar sid="myMenuBar" start="yes" />
                <view sid="myRenderingTuto" start="yes" />
            </registry>
         </service>
         
         <service uid="myMenuBar" type="::fwGui::IMenuBarSrv" implementation="::gui::aspect::DefaultMenuBarSrv" autoComChannel="no" >
             <gui>
                <layout>
                     <menu name="File" />
                </layout>
            </gui>
            <registry>
                <menu sid="menu_File" start="yes" />
            </registry>
         </service>
         
        <!-- This service define the file menu --> 
        <service uid="menu_File" type="::fwGui::IMenuSrv" implementation="::gui::aspect::DefaultMenuSrv" autoComChannel="no">
            <gui>
                <layout>
                    <menuItem name="Open image" shortcut="Ctrl+O" />
                    <menuItem name="Save image" shortcut="Ctrl+S" />
                    <separator />
                    <menuItem name="Quit" specialAction="QUIT" shortcut="Ctrl+Q" />
                </layout>
            </gui>
            <registry>
                <menuItem sid="action_openFile" start="yes" />
                <menuItem sid="action_SaveFile" start="yes" />
                <menuItem sid="action_quit" start="yes" />
            </registry>
        </service>
         
    
         <!-- This service (::gui::action::QuitAction) is a generic action that will close the application when the user click on the menuItem "Quit".
         It's possible to associate with this kind of service (::fwGui::IActionSrv) specific attributes to configure their style, shortcut... 
         (Note: In this tutorial, there is an attribute specialAction with the value "QUIT". On MS Windows, there's no impact.
                But on Mac OS, this value installs the menuItem in the system menu bar,
                and on Linux this value installs the default 'Quit' system icon in the menuItem.)
         The attribute "shortcut" is set with the value "Ctrl+Q" to close the application with this specific shortcut. -->
         <service uid="action_quit" type="::fwGui::IActionSrv" implementation="::gui::action::QuitAction" autoComChannel="no" />
    
        <!-- Definition of the starting and closing order of the different services. -->
        <start type="::fwGui::IFrameSrv" />
        <start uid="newOBject2newImage"/>
    
        <stop uid="newOBject2newImage"/>
        <stop type="::fwGui::IFrameSrv" />
    </object>
</extension>
</plugin>
